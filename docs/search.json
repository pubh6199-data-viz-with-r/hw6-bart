[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "",
    "text": "Briefly introduce your topic and research question."
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "",
    "text": "Briefly introduce your topic and research question."
  },
  {
    "objectID": "index.html#data",
    "href": "index.html#data",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Data",
    "text": "Data\nDescribe your data source(s), including where it came from, the key variables, and any pre-processing steps.\n\n\nCode\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(ggplot2)\nlibrary(shiny)\nlibrary(dplyr)\n\ndata &lt;- read_csv(\"data/my_data.csv\")\nglimpse(data)"
  },
  {
    "objectID": "index.html#visualizatiob-1-title-here",
    "href": "index.html#visualizatiob-1-title-here",
    "title": "Final Project: [YOUR TITLE HERE]",
    "section": "Visualizatiob 1: [Title Here]",
    "text": "Visualizatiob 1: [Title Here]\nDescribe what this plot shows, and why it’s important.\n\n\nCode\n# your code here"
  },
  {
    "objectID": "index.html#visualization-2-title-here",
    "href": "index.html#visualization-2-title-here",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Visualization 2: [Title Here]",
    "text": "Visualization 2: [Title Here]\nDescribe what this plot shows, and why it’s important.\n\n\nCode\n# your code here"
  },
  {
    "objectID": "index.html#visualization-3-title-here",
    "href": "index.html#visualization-3-title-here",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Visualization 3: [Title Here]",
    "text": "Visualization 3: [Title Here]\nDescribe what this plot shows, and why it’s important.\n\n\nCode\n# your code here"
  },
  {
    "objectID": "index.html#or-shiny-app-title-here",
    "href": "index.html#or-shiny-app-title-here",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "OR Shiny app: [Title Here]",
    "text": "OR Shiny app: [Title Here]\nIf you choose to create a Shiny app, describe the app’s purpose and functionality. Save your code inside the shiny-app/ folder, replace the URL below with your app’s URL\nClick here to open the interactive Shiny app"
  },
  {
    "objectID": "index.html#interpretation",
    "href": "index.html#interpretation",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Interpretation",
    "text": "Interpretation\nSummarize your key findings. What do your visualizations reveal?"
  },
  {
    "objectID": "index.html#limitations",
    "href": "index.html#limitations",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Limitations",
    "text": "Limitations\nDiscuss any data quality or design limitations."
  },
  {
    "objectID": "index.html#conclusion",
    "href": "index.html#conclusion",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Conclusion",
    "text": "Conclusion\nWrap up your project with a takeaway message or next steps."
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "References",
    "text": "References\nInclude any references to data sources, packages, or literature you used. If your visualization design is inspired by someone else’s work, cite those too.\n\nReference 1\nReference 2\nReference 3"
  },
  {
    "objectID": "data_init.html",
    "href": "data_init.html",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "",
    "text": "# read in C:\\Users\\sorae\\Documents\\RStudio\\PUBH6199\\hw6-bart\\data_raw\\MFA Tobacco HX 2025-3-1 - 2025-5-31 pt anon.xlsx\nlibrary(readxl)\nlibrary(dplyr)\nmfa_tobacco_hx &lt;- read_excel(file.path(\"data_raw\", \"MFA Tobacco HX 2025-3-1 - 2025-5-31 pt anon.xlsx\"))\n\nglimpse(mfa_tobacco_hx)\n\n#&gt; Rows: 10,198\n#&gt; Columns: 20\n#&gt; $ Location                               &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Fo…\n#&gt; $ Department                             &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CA…\n#&gt; $ `Visit ID`                             &lt;dbl&gt; 68488509, 68299325, 67850022, 6…\n#&gt; $ `Encounter Contact Date`               &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-0…\n#&gt; $ `VISIT TYPE`                           &lt;chr&gt; \"Office Visit\", \"Office Visit\",…\n#&gt; $ `Roomed By`                            &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE…\n#&gt; $ `Roomed By Provider Type`              &lt;chr&gt; \"Medical Assistant\", \"Medical A…\n#&gt; $ `Tobacco User`                         &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never…\n#&gt; $ `Smoking From`                         &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Smoking To`                           &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Pack/Day`                             &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Years Smoking`                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Years Quitting`                       &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ TotalPackYears                         &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ StartDateCount                         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ QuitDateCount                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ MultipleStartOrQuitDatesFlag           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ SCREENED_FOR_LUNG_CANCER               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ PATIENT_LUNG_CANCER_SCREEN_ELIGIBILITY &lt;chr&gt; \"Not Eligible\", \"Not Eligible\",…\n#&gt; $ `Tobacco History Complete`             &lt;chr&gt; \"Complete\", \"Complete\", \"Not Co…"
  },
  {
    "objectID": "data_init.html#import-data",
    "href": "data_init.html#import-data",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "",
    "text": "# read in C:\\Users\\sorae\\Documents\\RStudio\\PUBH6199\\hw6-bart\\data_raw\\MFA Tobacco HX 2025-3-1 - 2025-5-31 pt anon.xlsx\nlibrary(readxl)\nlibrary(dplyr)\nmfa_tobacco_hx &lt;- read_excel(file.path(\"data_raw\", \"MFA Tobacco HX 2025-3-1 - 2025-5-31 pt anon.xlsx\"))\n\nglimpse(mfa_tobacco_hx)\n\n#&gt; Rows: 10,198\n#&gt; Columns: 20\n#&gt; $ Location                               &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Fo…\n#&gt; $ Department                             &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CA…\n#&gt; $ `Visit ID`                             &lt;dbl&gt; 68488509, 68299325, 67850022, 6…\n#&gt; $ `Encounter Contact Date`               &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-0…\n#&gt; $ `VISIT TYPE`                           &lt;chr&gt; \"Office Visit\", \"Office Visit\",…\n#&gt; $ `Roomed By`                            &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE…\n#&gt; $ `Roomed By Provider Type`              &lt;chr&gt; \"Medical Assistant\", \"Medical A…\n#&gt; $ `Tobacco User`                         &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never…\n#&gt; $ `Smoking From`                         &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Smoking To`                           &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Pack/Day`                             &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Years Smoking`                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ `Years Quitting`                       &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ TotalPackYears                         &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ StartDateCount                         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ QuitDateCount                          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ MultipleStartOrQuitDatesFlag           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ SCREENED_FOR_LUNG_CANCER               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ PATIENT_LUNG_CANCER_SCREEN_ELIGIBILITY &lt;chr&gt; \"Not Eligible\", \"Not Eligible\",…\n#&gt; $ `Tobacco History Complete`             &lt;chr&gt; \"Complete\", \"Complete\", \"Not Co…"
  },
  {
    "objectID": "data_init.html#clean-up-the-column-names",
    "href": "data_init.html#clean-up-the-column-names",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "clean up the column names",
    "text": "clean up the column names\n\nlibrary(janitor)\nmfa_tobacco_hx |&gt; janitor::clean_names() -&gt; mfa_tobacco_hx\n\nglimpse(mfa_tobacco_hx)\n\n#&gt; Rows: 10,198\n#&gt; Columns: 20\n#&gt; $ location                               &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Fo…\n#&gt; $ department                             &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CA…\n#&gt; $ visit_id                               &lt;dbl&gt; 68488509, 68299325, 67850022, 6…\n#&gt; $ encounter_contact_date                 &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-0…\n#&gt; $ visit_type                             &lt;chr&gt; \"Office Visit\", \"Office Visit\",…\n#&gt; $ roomed_by                              &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE…\n#&gt; $ roomed_by_provider_type                &lt;chr&gt; \"Medical Assistant\", \"Medical A…\n#&gt; $ tobacco_user                           &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never…\n#&gt; $ smoking_from                           &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ smoking_to                             &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ pack_day                               &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ years_smoking                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ years_quitting                         &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ total_pack_years                       &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\",…\n#&gt; $ start_date_count                       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ quit_date_count                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n#&gt; $ multiple_start_or_quit_dates_flag      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ screened_for_lung_cancer               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n#&gt; $ patient_lung_cancer_screen_eligibility &lt;chr&gt; \"Not Eligible\", \"Not Eligible\",…\n#&gt; $ tobacco_history_complete               &lt;chr&gt; \"Complete\", \"Complete\", \"Not Co…\n\n# rename long column names to shorter names\nmfa_tobacco_hx &lt;- mfa_tobacco_hx %&gt;%\n  rename(\n    date = encounter_contact_date,\n    roomed_by_prov_type = roomed_by_provider_type,\n    hx_complete = tobacco_history_complete,\n    lcs_eligible = patient_lung_cancer_screen_eligibility\n  )"
  },
  {
    "objectID": "data_init.html#remove-null",
    "href": "data_init.html#remove-null",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "remove NULL",
    "text": "remove NULL\n\n# check for N/A\nmfa_tobacco_hx %&gt;%\n  select(roomed_by) %&gt;%\n  filter(is.na(roomed_by)) \n\n#&gt; # A tibble: 0 × 1\n#&gt; # ℹ 1 variable: roomed_by &lt;chr&gt;\n\n# 0 rows with roomed_by == NA\n\n# check for NULL\nmfa_tobacco_hx %&gt;%\n  select(roomed_by) %&gt;%\n  filter(roomed_by == \"NULL\") %&gt;% \n  count()\n\n#&gt; # A tibble: 1 × 1\n#&gt;       n\n#&gt;   &lt;int&gt;\n#&gt; 1   932\n\n# 308 rows with roomed_by == \"NULL\"\n\n# remove rows with roomed_by == \"NULL\"\nmfa_tobacco_hx &lt;- mfa_tobacco_hx %&gt;%\n  filter(roomed_by != \"NULL\")\n# check that NULL rows are removed\nmfa_tobacco_hx %&gt;%\n  select(roomed_by) %&gt;%\n  filter(roomed_by == \"NULL\") %&gt;% \n  count()\n\n#&gt; # A tibble: 1 × 1\n#&gt;       n\n#&gt;   &lt;int&gt;\n#&gt; 1     0\n\n# 0 rows with roomed_by == \"NULL\""
  },
  {
    "objectID": "data_init.html#convert-roomed-by-names-to-numeric-id",
    "href": "data_init.html#convert-roomed-by-names-to-numeric-id",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "convert Roomed By names to numeric ID",
    "text": "convert Roomed By names to numeric ID\n\n# identify distinct names\nmfa_tobacco_hx %&gt;%\n  select(roomed_by) %&gt;%\n  distinct() %&gt;%\n  arrange(roomed_by)\n\n#&gt; # A tibble: 300 × 1\n#&gt;    roomed_by          \n#&gt;    &lt;chr&gt;              \n#&gt;  1 ABDALLA, YOOSIF    \n#&gt;  2 ABUBAKER, TEBIANNE \n#&gt;  3 AHMAD, SHAHZAD     \n#&gt;  4 AIKEN-AMES, WYKENIA\n#&gt;  5 AKPINIBOYA, STEPHEN\n#&gt;  6 AKSELROD, HANA     \n#&gt;  7 ALCHALABI, TANIA   \n#&gt;  8 ALEMU, AMANUEL     \n#&gt;  9 ALZABEN, TAYLOR    \n#&gt; 10 AMOAH, NATHANIEL   \n#&gt; # ℹ 290 more rows\n\n# 211 unique names\n\n# assign a numeric ID to each roomed_by unique name\nmfa_tobacco_hx &lt;- mfa_tobacco_hx %&gt;%\n  mutate(roomed_by_ID = as.numeric(factor(roomed_by, levels = unique(roomed_by))))\nglimpse(mfa_tobacco_hx)\n\n#&gt; Rows: 9,266\n#&gt; Columns: 21\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n\n# check distinct roomed_by_ID\nmfa_tobacco_hx %&gt;%\n  select(roomed_by_ID) %&gt;%\n  distinct() %&gt;%\n  arrange(roomed_by_ID)\n\n#&gt; # A tibble: 300 × 1\n#&gt;    roomed_by_ID\n#&gt;           &lt;dbl&gt;\n#&gt;  1            1\n#&gt;  2            2\n#&gt;  3            3\n#&gt;  4            4\n#&gt;  5            5\n#&gt;  6            6\n#&gt;  7            7\n#&gt;  8            8\n#&gt;  9            9\n#&gt; 10           10\n#&gt; # ℹ 290 more rows\n\n# 211 unique roomed_by_IDs"
  },
  {
    "objectID": "data_init.html#remove-duplicates",
    "href": "data_init.html#remove-duplicates",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "remove duplicates",
    "text": "remove duplicates\n\n# check for duplicates (&gt;1 row with same visit_id)\nmfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() &gt; 1) %&gt;%\n  distinct(visit_id)\n\n#&gt; # A tibble: 456 × 1\n#&gt; # Groups:   visit_id [456]\n#&gt;    visit_id\n#&gt;       &lt;dbl&gt;\n#&gt;  1 68876021\n#&gt;  2 68281253\n#&gt;  3 68972330\n#&gt;  4 68481400\n#&gt;  5 68804341\n#&gt;  6 68799712\n#&gt;  7 68745574\n#&gt;  8 67660584\n#&gt;  9 68539554\n#&gt; 10 68979682\n#&gt; # ℹ 446 more rows\n\n# 180 visit_ids have duplicates\n\n# count non-duplicate visit_ids\nmfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() == 1) %&gt;%\n  ungroup() %&gt;%\n  count()\n\n#&gt; # A tibble: 1 × 1\n#&gt;       n\n#&gt;   &lt;int&gt;\n#&gt; 1  8257\n\n# 2901 non-duplicate visit_ids\n\n# count total number of rows with duplicate visit_ids (not total duplicate visit_ids, but total rows with those visit_ids)\nmfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() &gt; 1) %&gt;%\n  ungroup() %&gt;%\n  count()\n\n#&gt; # A tibble: 1 × 1\n#&gt;       n\n#&gt;   &lt;int&gt;\n#&gt; 1  1009\n\n# 402 rows with duplicate visit_ids\n\nglimpse(mfa_tobacco_hx)\n\n#&gt; Rows: 9,266\n#&gt; Columns: 21\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n\n# 3303 rows\n3303-2901\n\n#&gt; [1] 402\n\n# 402 matches 402 rows with duplicate visit_ids\n\n# show all rows with duplicates (for me to check consistency, incl with LCS eligibility)\nmfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() &gt; 1) %&gt;%\n  select(visit_id, roomed_by, hx_complete, lcs_eligible) %&gt;%\n  arrange(visit_id)\n\n#&gt; # A tibble: 1,009 × 4\n#&gt; # Groups:   visit_id [456]\n#&gt;    visit_id roomed_by               hx_complete  lcs_eligible\n#&gt;       &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;        &lt;chr&gt;       \n#&gt;  1 65175613 FERNANDEZ, GISELLE DIAZ Complete     Not Eligible\n#&gt;  2 65175613 FERNANDEZ, GISELLE DIAZ Complete     Not Eligible\n#&gt;  3 65331404 ERBY, AAYANNA           Complete     Not Eligible\n#&gt;  4 65331404 ERBY, AAYANNA           Complete     Not Eligible\n#&gt;  5 65559502 RODRIGUES, KRISTEN      Not Complete Not Eligible\n#&gt;  6 65559502 RODRIGUES, KRISTEN      Not Complete Not Eligible\n#&gt;  7 65744148 WIMBUSH, PATRICE        Complete     Not Eligible\n#&gt;  8 65744148 WIMBUSH, PATRICE        Complete     Not Eligible\n#&gt;  9 66223200 FANGMEYER, SARAH        Complete     Not Eligible\n#&gt; 10 66223200 FANGMEYER, SARAH        Complete     Not Eligible\n#&gt; # ℹ 999 more rows\n\n## keep all rows with unique visit_ids\nmfa_tobacco_data &lt;- mfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() == 1) %&gt;%\n  ungroup()\nglimpse(mfa_tobacco_data)\n\n#&gt; Rows: 8,257\n#&gt; Columns: 21\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n\n## for any duplicate visit_ids, keep the first instance where tobacco_history_complete == \"Complete\";\n## if none of the rows have tobacco_history_complete == \"Complete\", then keep the first instance\n## (this became more complicated, where I had to de-duplicate the records with hx_complete values all the same v not all the same separately)\n## (it feels like there should be a more efficient way to do this, but I couldn't figure it out)\n\n# create mfa_tobacco_dupl to hold the duplicates\nmfa_tobacco_dupl &lt;- mfa_tobacco_hx %&gt;%\n  group_by(visit_id) %&gt;%\n  filter(n() &gt; 1) %&gt;%\n  ungroup()\nglimpse(mfa_tobacco_dupl)\n\n#&gt; Rows: 1,009\n#&gt; Columns: 21\n#&gt; $ location                          &lt;chr&gt; \"Foggy Bottom\", \"Foggy Bottom\", \"Wes…\n#&gt; $ department                        &lt;chr&gt; \"FB PRIMARY CARE\", \"FB PRIMARY CARE\"…\n#&gt; $ visit_id                          &lt;dbl&gt; 68876021, 68876021, 68281253, 682812…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-20, 2025-03-20, 2025-03-03,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"PATTERSON, MYRAH\", \"PATTERSON, MYRA…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Quit\", \"Quit\", \"Quit\", \"Quit\", \"Qui…\n#&gt; $ smoking_from                      &lt;chr&gt; \"29952\", \"28491\", \"33604\", \"31778\", …\n#&gt; $ smoking_to                        &lt;chr&gt; \"29952\", \"29952\", \"33604\", \"33604\", …\n#&gt; $ pack_day                          &lt;chr&gt; \"0\", \"0.5\", \"0\", \"0.5\", \"0\", \"0.25\",…\n#&gt; $ years_smoking                     &lt;chr&gt; \"43.5\", \"4\", \"33.5\", \"5\", \"25.5\", \"1…\n#&gt; $ years_quitting                    &lt;chr&gt; \"43.5\", \"43.5\", \"33.5\", \"33.5\", \"25.…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"47.5\", \"47.5\", \"38.5\", \"38.5\", \"36.…\n#&gt; $ start_date_count                  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 2, 2, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Complete\", …\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 15, 15, 45, 45, 48, 48, 48, 54, 54, …\n\n# 402 rows with duplicate visit_ids\nmfa_tobacco_dupl %&gt;%\n  distinct(visit_id)\n\n#&gt; # A tibble: 456 × 1\n#&gt;    visit_id\n#&gt;       &lt;dbl&gt;\n#&gt;  1 68876021\n#&gt;  2 68281253\n#&gt;  3 68972330\n#&gt;  4 68481400\n#&gt;  5 68804341\n#&gt;  6 68799712\n#&gt;  7 68745574\n#&gt;  8 67660584\n#&gt;  9 68539554\n#&gt; 10 68979682\n#&gt; # ℹ 446 more rows\n\n# representing 180 unique visit_ids\n\n# check if for a given visit_id with more than 1 row, all rows have the same value for lcs_eligible\nmfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  summarise(lcs_eligible_unique = n_distinct(lcs_eligible)) %&gt;%\n  filter(lcs_eligible_unique &gt; 1)\n\n#&gt; # A tibble: 2 × 2\n#&gt;   visit_id lcs_eligible_unique\n#&gt;      &lt;dbl&gt;               &lt;int&gt;\n#&gt; 1 69247433                   2\n#&gt; 2 69299382                   2\n\n# checking to make sure this worked properly\nmfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  summarise(lcs_eligible_unique = n_distinct(lcs_eligible))\n\n#&gt; # A tibble: 456 × 2\n#&gt;    visit_id lcs_eligible_unique\n#&gt;       &lt;dbl&gt;               &lt;int&gt;\n#&gt;  1 65175613                   1\n#&gt;  2 65331404                   1\n#&gt;  3 65559502                   1\n#&gt;  4 65744148                   1\n#&gt;  5 66223200                   1\n#&gt;  6 66725789                   1\n#&gt;  7 66735924                   1\n#&gt;  8 66768306                   1\n#&gt;  9 66853773                   1\n#&gt; 10 66885925                   1\n#&gt; # ℹ 446 more rows\n\n# all 1s by reviewing table manually\n# so YES all rows with the same visit_id have the same value for lcs_eligible\n\n# check if for a given visit_id with more than 1 row, all rows have the same value for hx_complete\nmfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  summarise(hx_complete_unique = n_distinct(hx_complete)) %&gt;%\n  filter(hx_complete_unique &gt; 1)\n\n#&gt; # A tibble: 73 × 2\n#&gt;    visit_id hx_complete_unique\n#&gt;       &lt;dbl&gt;              &lt;int&gt;\n#&gt;  1 66725789                  2\n#&gt;  2 67660584                  2\n#&gt;  3 67878665                  2\n#&gt;  4 68105046                  2\n#&gt;  5 68129736                  2\n#&gt;  6 68156151                  2\n#&gt;  7 68167449                  2\n#&gt;  8 68190189                  2\n#&gt;  9 68249707                  2\n#&gt; 10 68345767                  2\n#&gt; # ℹ 63 more rows\n\n# checking to make sure this worked properly\nmfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  summarise(hx_complete_unique = n_distinct(hx_complete)) %&gt;% \n  arrange(desc(hx_complete_unique))\n\n#&gt; # A tibble: 456 × 2\n#&gt;    visit_id hx_complete_unique\n#&gt;       &lt;dbl&gt;              &lt;int&gt;\n#&gt;  1 66725789                  2\n#&gt;  2 67660584                  2\n#&gt;  3 67878665                  2\n#&gt;  4 68105046                  2\n#&gt;  5 68129736                  2\n#&gt;  6 68156151                  2\n#&gt;  7 68167449                  2\n#&gt;  8 68190189                  2\n#&gt;  9 68249707                  2\n#&gt; 10 68345767                  2\n#&gt; # ℹ 446 more rows\n\n# so NO: 32 visit_ids have more than 1 hx_complete value (i.e. at least 1 \"Complete\" and at least 1 \"Not Complete\")\n\n# extract the 32 visit_ids with more than 1 hx_complete value\nmfa_tobacco_dupl_hx &lt;- mfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  summarise(hx_complete_unique = n_distinct(hx_complete)) %&gt;% \n  filter(hx_complete_unique &gt; 1) %&gt;%\n  ungroup() %&gt;%\n  arrange(visit_id)\nglimpse(mfa_tobacco_dupl_hx)\n\n#&gt; Rows: 73\n#&gt; Columns: 2\n#&gt; $ visit_id           &lt;dbl&gt; 66725789, 67660584, 67878665, 68105046, 68129736, 6…\n#&gt; $ hx_complete_unique &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …\n\n# select all rows in mfa_tobacco_dupl with visit_ids from mfa_tobacco_dupl_hx\nmfa_tobacco_dupl %&gt;%\n  filter(visit_id %in% mfa_tobacco_dupl_hx$visit_id) %&gt;% \n  select(visit_id, hx_complete)\n\n#&gt; # A tibble: 164 × 2\n#&gt;    visit_id hx_complete \n#&gt;       &lt;dbl&gt; &lt;chr&gt;       \n#&gt;  1 67660584 Not Complete\n#&gt;  2 67660584 Complete    \n#&gt;  3 68129736 Not Complete\n#&gt;  4 68129736 Complete    \n#&gt;  5 68988952 Complete    \n#&gt;  6 68988952 Complete    \n#&gt;  7 68988952 Not Complete\n#&gt;  8 68851466 Complete    \n#&gt;  9 68851466 Not Complete\n#&gt; 10 68851466 Complete    \n#&gt; # ℹ 154 more rows\n\n# of these 32 visit_ids, how many have hx_complete == \"Complete\"?\nmfa_tobacco_dupl %&gt;%\n  filter(visit_id %in% mfa_tobacco_dupl_hx$visit_id) %&gt;% \n  select(visit_id, hx_complete) %&gt;%\n  filter(hx_complete == \"Complete\") %&gt;%\n  distinct(visit_id) %&gt;%\n  arrange(visit_id)\n\n#&gt; # A tibble: 73 × 1\n#&gt;    visit_id\n#&gt;       &lt;dbl&gt;\n#&gt;  1 66725789\n#&gt;  2 67660584\n#&gt;  3 67878665\n#&gt;  4 68105046\n#&gt;  5 68129736\n#&gt;  6 68156151\n#&gt;  7 68167449\n#&gt;  8 68190189\n#&gt;  9 68249707\n#&gt; 10 68345767\n#&gt; # ℹ 63 more rows\n\n# this seems to say all 32\nmfa_tobacco_dupl %&gt;%\n  filter(visit_id %in% mfa_tobacco_dupl_hx$visit_id) %&gt;% \n  select(visit_id, hx_complete) %&gt;%\n  arrange(visit_id)\n\n#&gt; # A tibble: 164 × 2\n#&gt;    visit_id hx_complete \n#&gt;       &lt;dbl&gt; &lt;chr&gt;       \n#&gt;  1 66725789 Not Complete\n#&gt;  2 66725789 Complete    \n#&gt;  3 67660584 Not Complete\n#&gt;  4 67660584 Complete    \n#&gt;  5 67878665 Complete    \n#&gt;  6 67878665 Not Complete\n#&gt;  7 67878665 Complete    \n#&gt;  8 67878665 Not Complete\n#&gt;  9 68105046 Not Complete\n#&gt; 10 68105046 Complete    \n#&gt; # ℹ 154 more rows\n\n# it does look on manual check like all 32 have a Complete hx_complete value\n\n# create a new variable hx_complete_unique to count the number of unique hx_complete values for each visit_id to parallel the function of the mfa_tobacco_dupl_hx$visit_id list (but will work to select for both cases, i.e. where all hx_complete values are the same and where they are not)\nmfa_tobacco_dupl &lt;- mfa_tobacco_dupl %&gt;%\n  group_by(visit_id) %&gt;%\n  mutate(hx_complete_unique = n_distinct(hx_complete))\nglimpse(mfa_tobacco_dupl)\n\n#&gt; Rows: 1,009\n#&gt; Columns: 22\n#&gt; Groups: visit_id [456]\n#&gt; $ location                          &lt;chr&gt; \"Foggy Bottom\", \"Foggy Bottom\", \"Wes…\n#&gt; $ department                        &lt;chr&gt; \"FB PRIMARY CARE\", \"FB PRIMARY CARE\"…\n#&gt; $ visit_id                          &lt;dbl&gt; 68876021, 68876021, 68281253, 682812…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-20, 2025-03-20, 2025-03-03,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"PATTERSON, MYRAH\", \"PATTERSON, MYRA…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Quit\", \"Quit\", \"Quit\", \"Quit\", \"Qui…\n#&gt; $ smoking_from                      &lt;chr&gt; \"29952\", \"28491\", \"33604\", \"31778\", …\n#&gt; $ smoking_to                        &lt;chr&gt; \"29952\", \"29952\", \"33604\", \"33604\", …\n#&gt; $ pack_day                          &lt;chr&gt; \"0\", \"0.5\", \"0\", \"0.5\", \"0\", \"0.25\",…\n#&gt; $ years_smoking                     &lt;chr&gt; \"43.5\", \"4\", \"33.5\", \"5\", \"25.5\", \"1…\n#&gt; $ years_quitting                    &lt;chr&gt; \"43.5\", \"43.5\", \"33.5\", \"33.5\", \"25.…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"47.5\", \"47.5\", \"38.5\", \"38.5\", \"36.…\n#&gt; $ start_date_count                  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 2, 2, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Complete\", …\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 15, 15, 45, 45, 48, 48, 48, 54, 54, …\n#&gt; $ hx_complete_unique                &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n\nmfa_tobacco_dupl %&gt;%\n  filter(hx_complete_unique &gt; 1) %&gt;%\n  count()\n\n#&gt; # A tibble: 73 × 2\n#&gt; # Groups:   visit_id [73]\n#&gt;    visit_id     n\n#&gt;       &lt;dbl&gt; &lt;int&gt;\n#&gt;  1 66725789     2\n#&gt;  2 67660584     2\n#&gt;  3 67878665     4\n#&gt;  4 68105046     2\n#&gt;  5 68129736     2\n#&gt;  6 68156151     2\n#&gt;  7 68167449     2\n#&gt;  8 68190189     2\n#&gt;  9 68249707     2\n#&gt; 10 68345767     3\n#&gt; # ℹ 63 more rows\n\n# correctly yields 32\nmfa_tobacco_dupl %&gt;%\n  filter(hx_complete_unique == 1) %&gt;%\n  count()\n\n#&gt; # A tibble: 383 × 2\n#&gt; # Groups:   visit_id [383]\n#&gt;    visit_id     n\n#&gt;       &lt;dbl&gt; &lt;int&gt;\n#&gt;  1 65175613     2\n#&gt;  2 65331404     2\n#&gt;  3 65559502     2\n#&gt;  4 65744148     2\n#&gt;  5 66223200     2\n#&gt;  6 66735924     2\n#&gt;  7 66768306     2\n#&gt;  8 66853773     2\n#&gt;  9 66885925     3\n#&gt; 10 66934461     2\n#&gt; # ℹ 373 more rows\n\n# yields 148\n148+32\n\n#&gt; [1] 180\n\n# correctly totals to 180 visit_ids with duplicates\n# now I can filter based on hx_complete_unique == 1 v &gt; 1 instead of the mfa_tobacco_dupl_hx$visit_id\n\n## so now I can remove duplicates from mfa_tobacco_dupl for visit_ids where NOT all hx_complete values are the same (and all should have at least one hx_complete == \"Complete\" value) by keeping the first instance where hx_complete == \"Complete\" and adding those rows to mfa_tobacco_data\nglimpse(mfa_tobacco_data)\n\n#&gt; Rows: 8,257\n#&gt; Columns: 21\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n\nmfa_tobacco_data &lt;- mfa_tobacco_data %&gt;%\n  bind_rows(\n    mfa_tobacco_dupl %&gt;%\n      filter(hx_complete_unique &gt; 1) %&gt;%\n      group_by(visit_id) %&gt;%\n      filter(hx_complete == \"Complete\") %&gt;% \n      slice(1) %&gt;% # this should keep the first instance where hx_complete == \"Complete\"\n      ungroup()\n  )\nglimpse(mfa_tobacco_data)\n\n#&gt; Rows: 8,330\n#&gt; Columns: 22\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n#&gt; $ hx_complete_unique                &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n\n2933-2901\n\n#&gt; [1] 32\n\n# 32 rows were correctly added to mfa_tobacco_data\n\n## now need to remove duplicates from mfa_tobacco_dupl for visit_ids where all hx_complete values are the same by keeping the first instance and adding those rows to mfa_tobacco_data\nmfa_tobacco_data &lt;- mfa_tobacco_data %&gt;%\n  bind_rows(\n    mfa_tobacco_dupl %&gt;%\n      filter(hx_complete_unique == 1) %&gt;%\n      group_by(visit_id) %&gt;%\n      slice(1) %&gt;% # this should keep the first instance \n      ungroup()\n  )\nglimpse(mfa_tobacco_data)\n\n#&gt; Rows: 8,713\n#&gt; Columns: 22\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n#&gt; $ hx_complete_unique                &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n\n3081-2933\n\n#&gt; [1] 148\n\n# 148 rows were correctly added to mfa_tobacco_data\n3081-2901\n\n#&gt; [1] 180\n\n# 180 total rows were added to mfa_tobacco_data, which is the same as the number of visit_ids with duplicates in mfa_tobacco_dupl\nmfa_tobacco_data |&gt; \n  distinct(visit_id)\n\n#&gt; # A tibble: 8,713 × 1\n#&gt;    visit_id\n#&gt;       &lt;dbl&gt;\n#&gt;  1 68488509\n#&gt;  2 68299325\n#&gt;  3 67850022\n#&gt;  4 68048243\n#&gt;  5 68767627\n#&gt;  6 68528285\n#&gt;  7 68436688\n#&gt;  8 67916852\n#&gt;  9 68102286\n#&gt; 10 68122559\n#&gt; # ℹ 8,703 more rows\n\n# 3081 unique visit_ids in mfa_tobacco_data matches 3081 rows in mfa_tobacco_data"
  },
  {
    "objectID": "data_init.html#remove-unnecessary-columns",
    "href": "data_init.html#remove-unnecessary-columns",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "remove unnecessary columns",
    "text": "remove unnecessary columns\n\nglimpse(mfa_tobacco_data)\n\n#&gt; Rows: 8,713\n#&gt; Columns: 22\n#&gt; $ location                          &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy B…\n#&gt; $ department                        &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOL…\n#&gt; $ visit_id                          &lt;dbl&gt; 68488509, 68299325, 67850022, 680482…\n#&gt; $ date                              &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12,…\n#&gt; $ visit_type                        &lt;chr&gt; \"Office Visit\", \"Office Visit\", \"Off…\n#&gt; $ roomed_by                         &lt;chr&gt; \"CHAVEZ, XIOMARA\", \"CHO, GUNHEE\", \"H…\n#&gt; $ roomed_by_prov_type               &lt;chr&gt; \"Medical Assistant\", \"Medical Assist…\n#&gt; $ tobacco_user                      &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"N…\n#&gt; $ smoking_from                      &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ smoking_to                        &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ pack_day                          &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_smoking                     &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ years_quitting                    &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ total_pack_years                  &lt;chr&gt; \"NULL\", \"NULL\", \"NULL\", \"NULL\", \"NUL…\n#&gt; $ start_date_count                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ quit_date_count                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n#&gt; $ multiple_start_or_quit_dates_flag &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ screened_for_lung_cancer          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n#&gt; $ lcs_eligible                      &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not…\n#&gt; $ hx_complete                       &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complet…\n#&gt; $ roomed_by_ID                      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1…\n#&gt; $ hx_complete_unique                &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n\ntobacco_data &lt;- mfa_tobacco_data %&gt;%\n  select(\n    location,\n    department,\n    date,\n    roomed_by_ID,\n    roomed_by_prov_type,\n    tobacco_user,\n    hx_complete,\n    lcs_eligible\n  )\nglimpse(tobacco_data)\n\n#&gt; Rows: 8,713\n#&gt; Columns: 8\n#&gt; $ location            &lt;chr&gt; \"Bethesda\", \"Foggy Bottom\", \"Foggy Bottom\", \"Foggy…\n#&gt; $ department          &lt;chr&gt; \"BETHESDA PRIMARY CARE\", \"FB CARDIOLOGY\", \"FB NEUR…\n#&gt; $ date                &lt;dttm&gt; 2025-03-07, 2025-03-27, 2025-03-12, 2025-03-24, 2…\n#&gt; $ roomed_by_ID        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,…\n#&gt; $ roomed_by_prov_type &lt;chr&gt; \"Medical Assistant\", \"Medical Assistant\", \"Medical…\n#&gt; $ tobacco_user        &lt;chr&gt; \"Never\", \"Never\", \"Yes\", \"Never\", \"Never\", \"Quit\",…\n#&gt; $ hx_complete         &lt;chr&gt; \"Complete\", \"Complete\", \"Not Complete\", \"Complete\"…\n#&gt; $ lcs_eligible        &lt;chr&gt; \"Not Eligible\", \"Not Eligible\", \"Not Eligible\", \"N…"
  },
  {
    "objectID": "data_init.html#output-the-cleaned-data-to-csv",
    "href": "data_init.html#output-the-cleaned-data-to-csv",
    "title": "dataset initialization (de-duplicate & anonymize)",
    "section": "output the cleaned data to csv",
    "text": "output the cleaned data to csv\n\nwrite.csv(tobacco_data, \"tobacco_data_clean.csv\", row.names = FALSE)"
  },
  {
    "objectID": "index.html#visualization-1-title-here",
    "href": "index.html#visualization-1-title-here",
    "title": "Final Project: [YOUR TITLE HERE] | PUBH 6199: Visualizing Data with R",
    "section": "Visualization 1: [Title Here]",
    "text": "Visualization 1: [Title Here]\nDescribe what this plot shows, and why it’s important.\n\n\nCode\n# your code here"
  }
]